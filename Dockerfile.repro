FROM ubuntu:bionic

RUN echo "deb http://s3-us-west-2.amazonaws.com/polyverse-mirror-dev/ubuntu/ bionic main restricted" | tee /etc/apt/sources.list && \
    echo "deb http://s3-us-west-2.amazonaws.com/polyverse-mirror-dev/ubuntu/ bionic-updates main restricted" | tee -a /etc/apt/sources.list && \
    echo "deb http://s3-us-west-2.amazonaws.com/polyverse-mirror-dev/ubuntu/ bionic universe" | tee -a /etc/apt/sources.list && \
    echo "deb http://s3-us-west-2.amazonaws.com/polyverse-mirror-dev/ubuntu/ bionic-updates universe" | tee -a /etc/apt/sources.list && \
    echo "deb http://s3-us-west-2.amazonaws.com/polyverse-mirror-dev/ubuntu/ bionic multiverse" | tee -a /etc/apt/sources.list && \
    echo "deb http://s3-us-west-2.amazonaws.com/polyverse-mirror-dev/ubuntu/ bionic-updates multiverse" | tee -a /etc/apt/sources.list
#RUN echo "APT::Acquire::Retries \"3\";" > /etc/apt/apt.conf.d/80-retries
RUN apt update -y && apt upgrade -y
COPY ./apt_1.6.10_amd64.deb /opt/pv/
#RUN dpkg -i /opt/pv/apt_1.6.10_amd64.deb
# -o Acquire::http::Pipeline-Depth=1
# -o Acquire::http::Retries=3
# -o Acquire::http::Dl-Limit=200 
RUN DEBIAN_FRONTEND=noninteractive apt install -y adduser adwaita-icon-theme alsa-utils aolserver4-core aolserver4-daemon aolserver4-doc apache2 apache2-bin apache2-data apache2-utils apt apt-transport-https apt-utils aspell aspell-en at-spi2-core avahi-daemon base-files base-passwd bash bind9-host bsdutils build-essential bzip2 ca-certificates coreutils cron dash dbus dconf-gsettings-backend dconf-service debconf debianutils default-mysql-client dictionaries-common diffutils dpkg e2fsprogs emacsen-common enchant espeak-ng-data fdisk file findutils fontconfig fontconfig-config fonts-dejavu-core fonts-droid-fallback fonts-noto-mono gcc-8-base gconf-service gconf-service-backend gconf2-common geoip-database gir1.2-atk-1.0 gir1.2-atspi-2.0 gir1.2-evince-3.0 gir1.2-freedesktop gir1.2-gconf-2.0 gir1.2-gdkpixbuf-2.0 gir1.2-glib-2.0 gir1.2-gtk-3.0 gir1.2-javascriptcoregtk-4.0 gir1.2-pango-1.0 gir1.2-rsvg-2.0 gir1.2-soup-2.4 gir1.2-sugarext-1.0 gir1.2-webkit2-4.0 glib-networking glib-networking-common glib-networking-services gpgv grep gsettings-desktop-schemas gstreamer1.0-espeak gstreamer1.0-gl gstreamer1.0-plugins-base gstreamer1.0-plugins-good gstreamer1.0-pulseaudio gstreamer1.0-x gtk-update-icon-cache gzip hicolor-icon-theme hostname humanity-icon-theme hunspell-en-us init-system-helpers iproute2 iso-codes javascript-common kmod krb5-locales libaa1 libacl1 libaio1 libao-common libao4 libapache2-mod-php7.2 libapparmor1 libapr1 libaprutil1 libaprutil1-dbd-sqlite3 libaprutil1-ldap libapt-inst2.0 libapt-pkg-dev libapt-pkg5.0 libarchive13 libargon2-0 libasn1-8-heimdal libasound2 libasound2-data libaspell15 libasyncns0 libatk-bridge2.0-0 libatk1.0-0 libatk1.0-data libatm1 libatspi2.0-0 libattr1 libaudit-common libaudit1 libavahi-client3 libavahi-common-data libavahi-common3 libavahi-core7 libavahi-glib1 libavahi-gobject0 libavc1394-0 libbind9-160 libblkid1 libbrotli1 libbsd0 libbz2-1.0 libc-bin libc-dev-bin libc6 libc6-dev libcaca0 libcairo-gobject2 libcairo2 libcap-ng0 libcap2 libcap2-bin libcdparanoia0 libcolord2 libcom-err2 libcroco3 libcups2 libcupsfilters1 libcupsimage2 libcurl3-gnutls libdaemon0 libdatrie1 libdb5.3 libdbus-1-3 libdbus-glib-1-2 libdconf1 libdebconfclient0 libdjvulibre-text libdjvulibre21 libdns1100 libdrm-amdgpu1 libdrm-common libdrm-intel1 libdrm-nouveau2 libdrm-radeon1 libdrm2 libdv4 libedit2 libegl-mesa0 libegl1 libelf1 libenchant1c2a libepoxy0 libespeak-ng1 libevdocument3-4 libevview3-3 libexpat1 libext2fs2 libfdisk1 libffi6 libfftw3-single3 libflac8 libfontconfig1 libfreetype6 libfribidi0 libgbm1 libgcc1 libgconf-2-4 libgcrypt20 libgd3 libgdbm-compat4 libgdbm5 libgdk-pixbuf2.0-0 libgdk-pixbuf2.0-bin libgdk-pixbuf2.0-common libgeoip1 libgirepository-1.0-1 libgl1 libgl1-mesa-dri libglapi-mesa libglib2.0-0 libglib2.0-data libglvnd0 libglx-mesa0 libglx0 libgmp10 libgnutls30 libgomp1 libgpg-error0 libgpm2 libgraphene-1.0-0 libgraphite2-3 libgs9 libgs9-common libgssapi-krb5-2 libgssapi3-heimdal libgstreamer-gl1.0-0 libgstreamer-plugins-base1.0-0 libgstreamer-plugins-good1.0-0 libgstreamer1.0-0 libgtk-3-0 libgtk-3-bin libgtk-3-common libgudev-1.0-0 libgxps2 libharfbuzz-icu0 libharfbuzz0b libhcrypto4-heimdal libheimbase1-heimdal libheimntlm0-heimdal libhogweed4 libhunspell-1.6-0 libhx509-5-heimdal libhyphen0 libice6 libicu60 libidn11 libidn2-0 libiec61883-0 libijs-0.35 libisc169 libisccc160 libisccfg160 libjack-jackd2-0 libjavascriptcoregtk-4.0-18 libjbig0 libjbig2dec0 libjpeg-turbo8 libjpeg8 libjs-cropper libjs-prototype libjs-scriptaculous libjson-c3 libjson-glib-1.0-0 libjson-glib-1.0-common libk5crypto3 libkeyutils1 libkmod2 libkpathsea6 libkrb5-26-heimdal libkrb5-3 libkrb5support0 liblcms2-2 libldap-2.4-2 libldap-common libllvm7 liblua5.2-0 liblwres160 liblz4-1 liblzma5 liblzo2-2 libmagic-mgc libmagic1 libmission-control-plugins0 libmnl0 libmount1 libmp3lame0 libmpdec2 libmpg123-0 libncurses5 libncursesw5 libnettle6 libnewt0.52 libnghttp2-14 libnginx-mod-http-geoip libnginx-mod-http-image-filter libnginx-mod-http-xslt-filter libnginx-mod-mail libnginx-mod-stream libnm0 libnotify4 libnspr4 libnss-mdns libnss3 libnuma1 libogg0 libopus0 liborc-0.4-0 libp11-kit0 libpam-cap libpam-modules libpam-modules-bin libpam-runtime libpam0g libpango-1.0-0 libpangocairo-1.0-0 libpangoft2-1.0-0 libpangoxft-1.0-0 libpaper-utils libpaper1 libpcaudio0 libpciaccess0 libpcre3 libperl5.26 libphp-phpmailer libpixman-1-0 libpng16-16 libpoppler-glib8 libpoppler73 libpopt0 libprocps6 libproxy1v5 libpsl5 libpulse0 libpython-stdlib libpython2.7-minimal libpython2.7-stdlib libpython3.6 libpython3.6-minimal libpython3.6-stdlib libraw1394-11 libreadline7 librest-0.7-0 libroken18-heimdal librsvg2-2 librsvg2-common librtmp1 libsamplerate0 libsasl2-2 libsasl2-modules libsasl2-modules-db libseccomp2 libsecret-1-0 libsecret-common libselinux1 libsemanage-common libsemanage1 libsensors4 libsepol1 libshout3 libslang2 libsm6 libsmartcols1 libsndfile1 libsodium23 libsonic0 libsoup-gnome2.4-1 libsoup2.4-1 libspectre1 libspeex1 libsqlite3-0 libss2 libssl1.1 libstdc++6 libsugarext-data libsugarext0 libsystemd0 libtag1v5 libtag1v5-vanilla libtasn1-6 libtcl8.6 libtelepathy-glib0 libtext-iconv-perl libthai-data libthai0 libtheora0 libtiff5 libtinfo5 libtwolame0 libudev1 libunistring2 libuuid1 libv4l-0 libv4lconvert0 libvisual-0.4-0 libvorbis0a libvorbisenc2 libvorbisfile3 libvpx5 libwavpack1 libwayland-client0 libwayland-cursor0 libwayland-egl1 libwayland-server0 libwebkit2gtk-4.0-37 libwebp6 libwebpdemux2 libwind0-heimdal libwoff1 libwrap0 libx11-6 libx11-data libx11-xcb1 libxau6 libxcb-dri2-0 libxcb-dri3-0 libxcb-glx0 libxcb-present0 libxcb-render0 libxcb-shm0 libxcb-sync1 libxcb-xfixes0 libxcb1 libxcomposite1 libxcursor1 libxdamage1 libxdmcp6 libxext6 libxfixes3 libxft2 libxi6 libxinerama1 libxkbcommon0 libxml2 libxpm4 libxrandr2 libxrender1 libxshmfence1 libxslt1.1 libxtables12 libxtst6 libxv1 libxxf86vm1 libzstd1 linux-libc-dev login logrotate lsb-base manpages manpages-dev mawk mime-support mount multiarch-support mysql-client-5.7 mysql-client-core-5.7 mysql-common nano ncurses-base ncurses-bin netbase nginx nginx-common nginx-core notification-daemon openssl passwd perl perl-base perl-modules-5.26 php php-common php-gd php-getid3 php-mysql php7.2 php7.2-cli php7.2-common php7.2-gd php7.2-json php7.2-mysql php7.2-opcache php7.2-readline poppler-data procps psmisc publicsuffix python python-cairo python-dateutil python-dbus python-decorator python-gi python-gi-cairo python-minimal python-six python-sugar3 python-telepathy python2.7 python2.7-minimal readline-common sed sensible-utils shared-mime-info ssl-cert sugar-browse-activity sysvinit-utils tar telepathy-mission-control-5 telepathy-salut tzdata ubuntu-keyring ubuntu-mono ucf unzip util-linux vim vim-common vim-runtime vorbis-tools whiptail wordpress wordpress-l10n wordpress-theme-twentyseventeen x11-common xdg-user-dirs xkb-data xxd xz-utils zlib1g zlib1g-dev

